= Temporary Environment Variables

A crate to deal with environment variable changes specially during tests.

WARNING: The software currently in the starting phase and will change

== Installation

WARNING: This crate is not yet available via crates.io (comming soon)

```toml
temp_env_vars = { git = "https://github.com/guenhter/temp_env_vars.git", branch = "main" }
temp_env_vars_core = { git = "https://github.com/guenhter/temp_env_vars.git", branch = "main" }
```


== Usage

Use with `#[temp_env_vars]`

```Rust
#[test]
#[temp_env_vars]
fn test_some() {
    std::env::set_var("FOO", "BAR");
    assert_eq!(std::env::var("FOO").unwrap(), "BAR");

    // Env vars get reset when test is done
}
```


Use with `TestEnvScope`

```Rust
#[test]
#[serial] // Advices to use serial, alse parallel tests could mix up envs
fn test_some() {
    let _env_scope = TestEnvScope::new();
    std::env::set_var("FOO", "BAR");
    assert_eq!(std::env::var("FOO").unwrap(), "BAR");

    // After "_env_scope" goes out of scope, all vars are restored
}

#[test]
#[serial] // Advices to use serial, alse parallel tests could mix up envs
fn test_bar() {
    let _env_scope = TestEnvScope::new();
    std::env::set_var("FOO", "BAR");
    assert_eq!(std::env::var("FOO").unwrap(), "BAR");

    drop(_env_scope); // After "_env_scope" goes out of scope, all vars are restored


    // "FOO" is not longer set here.
}
```


== Contribution

Contribution are always welcome in any form.

You acknowledge and agree that the owner reserve the right to change the license of the Work, including but not limited to all Contributions previously submitted by You, at any time without the need for approval from You or any other contributor.

== License

This project is licensed under the [MIT license].

[MIT license]: https://github.com/guenhter/temp_env_vars/blob/main/LICENSE
